function ConvertToDDMMYYYY(n){var r=new Date(n),t=""+(r.getMonth()+1),i=""+r.getDate(),u=r.getFullYear();return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),[i,t,u].join("-")}function ConvertToIndian(n){return result=new Number(n).toLocaleString("hi-IN",{maximumFractionDigits:2,style:"currency",currency:"INR"})}function TrueToYes(n){return String(n)==="true"?"Yes":"No"}function PostFixPercent(n){return n+"%"}function GetStateList(n){$(document).ready(function(){$("#"+n).autocomplete({source:function(n,t){$.ajax({url:"/Share/StateAutoComplete",type:"POST",dataType:"json",data:{Prefix:n.term},success:function(n){t($.map(n,function(n){return{label:n.stateName,value:n.stateName,id:n.stateID}}))}})},select:function(t,i){$("#"+n).val(i.item.label)}})})}function GetCityList(n){$(document).ready(function(){$("#"+n).autocomplete({source:function(n,t){$.ajax({url:"/Share/CityAutoComplete",type:"POST",dataType:"json",data:{Prefix:n.term},success:function(n){t($.map(n,function(n){return{label:n.cityName,value:n.cityName,id:n.cityID}}))}})},select:function(t,i){$("#"+n).val(i.item.label)}})})}function GetProductList(n){$(document).ready(function(){$("#"+n).autocomplete({source:function(n,t){$.ajax({url:"/Share/ProductAutoComplete",type:"POST",dataType:"json",data:{Prefix:n.term},success:function(n){t($.map(n,function(n){return{label:n.productName,value:n.productName,id:n.productID}}))}})},select:function(n,t){FetchProductOrService(t.item.id,"P");$("#ProductID").val(t.item.id)}})})}function GetServiceList(n){$("#"+n).autocomplete({source:function(n,t){$.ajax({url:"/Share/ServiceAutoComplete",type:"POST",dataType:"json",data:{Prefix:n.term},success:function(n){t($.map(n,function(n){return{label:n.serviceName,value:n.serviceName,id:n.serviceID}}))}})},select:function(n,t){FetchProductOrService(t.item.id,"S");$("#ServiceID").val(t.item.id)}})}function GetChargesList(n){$("#"+n).autocomplete({source:function(n,t){$.ajax({url:"/Share/ChargesAutoComplete",type:"POST",dataType:"json",data:{Prefix:n.term},success:function(n){t($.map(n,function(n){return{label:n.chargesName,value:n.chargesName,id:n.chargesID}}))}})},select:function(n,t){FetchProductOrService(t.item.id,"C");$("#ChargesID").val(t.item.id)}})}function FetchProductOrService(n,t){$.ajax({type:"POST",url:"/Share/FetchProductOrService",dataType:"json",data:{iID:n,iType:t},success:function(n){var r=n,i=r.split("^");t=="P"&&($("#PUnit").val(i[0]),$("#PGST").val(i[1]),$("#PRate").val(i[2]),$("#ProductName").val(i[3]),$("#PQty").val(1));t=="C"&&($("#ChargesName").val(i[0]),$("#CCharge").val(i[1]),$("#ChargesID").val(i[2]));t=="S"&&($("#SUnit").val(i[0]),$("#SGST").val(i[1]),$("#SRate").val(i[2]),$("#ServiceName").val(i[3]),$("#SQty").val(1))}})}function InsertRow(n,t){var i=n,e=t,r,u,f,o,s,h,c;i=="P"&&(r=$("#ProductID").val(),u=$("#PQty").val(),f=$("#PRate").val());i=="S"&&(r=$("#ServiceID").val(),u=$("#SQty").val(),f=$("#SRate").val());i=="C"&&(r=$("#ChargesID").val(),u=1,f=$("#CCharge").val());e=="ACP"&&(o=productform(),o==!0&&(s=$("#btnp").val(),s=="CP"?$.ajax({type:"POST",url:"/Share/InsertRow",dataType:"json",data:{iID:r,iQty:u,iRate:f,iType:i},success:function(n){DisplayData(n)}}):($("#iconp").removeClass("fas fa-recycle").addClass("fas fa-plus"),$("#btnp").val("CP"),$.ajax({type:"POST",url:"/Share/UpdateRow",dataType:"json",data:{iID:r,iQty:u,iRate:f,iType:i},success:function(n){DisplayData(n)}}))));e=="ACS"&&(sstatus=serviceform(),sstatus==!0&&(h=$("#btns").val(),h=="CS"?$.ajax({type:"POST",url:"/Share/InsertRow",dataType:"json",data:{iID:r,iQty:u,iRate:f,iType:i},success:function(n){DisplayData(n)}}):($("#icons").removeClass("fas fa-recycle").addClass("fas fa-plus"),$("#btns").val("CS"),$.ajax({type:"POST",url:"/Share/UpdateRow",dataType:"json",data:{iID:r,iQty:u,iRate:f,iType:i},success:function(n){DisplayData(n)}}))));e=="ACC"&&(cstatus=chargesform(),cstatus==!0&&(c=$("#btnc").val(),c=="CC"?$.ajax({type:"POST",url:"/Share/InsertRow",dataType:"json",data:{iID:r,iQty:u,iRate:f,iType:i},success:function(n){DisplayData(n)}}):($("#iconc").removeClass("fas fa-recycle").addClass("fas fa-plus"),$("#btnc").val("CC"),$.ajax({type:"POST",url:"/Share/UpdateRow",dataType:"json",data:{iID:r,iQty:u,iRate:f,iType:i},success:function(n){DisplayData(n)}}))))}function DeleteRow(n){$.ajax({type:"POST",url:"/Share/DeleteRow",dataType:"json",data:{iSer:n},success:function(n){DisplayData(n)}})}function LoadTransDataCustomer(n,t){$.ajax({type:"POST",url:"/Share/FetchRows",dataType:"json",data:{ID:n,TransModel:"T1TX"},success:function(n){DisplayData(n);FetchCustomer(t)}})}function LoadTransDataVender(n,t){$.ajax({type:"POST",url:"/Share/FetchRows",dataType:"json",data:{ID:t,TransModel:"T2TX"},success:function(n){DisplayData(n);FetchVender(t)}})}function DisplayData(n){var t=0,i;$("#dtTable tbody tr").remove();i="";$.each(n,function(n,i){t=t+1;var r="<tr><td>"+t+"<\/td><td>"+i.itemName+"<\/td><td>"+i.hsnCode+"<\/td><td class='text-right'>"+i.quantity+"<\/td><td class='text-right'>"+i.unit+"<\/td><td class='text-right'>"+i.rate+"<\/td><td class='text-right'>"+i.amount+"<\/td><td class='text-right'>"+i.gstSlab+"%<\/td><td class='text-right'>"+i.gstAmount+"<\/td><td><button type='button' id="+i.itemID+" onclick='FetchEditRowProductOrService(this.id)' class='btn btn-xs btn-outline-success'><i class='fas fa-edit'><\/i><\/button><\/td><td><button type='button' id="+i.serNo+" onclick='DeleteRow(this.id)' class='btn btn-xs btn-outline-danger'><i class='fas fa-window-close'><\/i><\/button><\/td><\/tr>";$("#dtTable tbody").append(r)});discount=$("#Discount").val();$.ajax({type:"POST",url:"/Share/Calculation","async":!1,dataType:"json",data:{Dis:discount},success:function(n){totalamt=n.TotalAmount;totalgst=n.TotalGST;subtotal=n.SubTotal;discount=n.Discount;grandtotal=n.GrandTotal;$("#Discount").val(discount);$("#GroundTotal").text(grandtotal)}});$("#dtTable tbody").append('<tr><td colspan="6" align="right" > <b>Total<\/b><\/td><td class="text-right"><b style="color:green">'+totalamt+'<\/b><\/td><td><\/td><td class="text-right"><b style="color:green">'+totalgst+'<\/b><\/td><td><\/td><td><\/td><\/tr><tr><td colspan="8" class="text-right"><b>Sub Total (Amount + GST Amt) <\/b><\/td><td class="text-right"><b style="color:green">'+subtotal+"<\/b><\/td><td><\/td><td><\/td><\/tr>");$("#ProductName").val("");$("#PQty").val("");$("#PUnit").val("");$("#PRate").val("");$("#PGST").val("");$("#ServiceName").val("");$("#SQty").val("");$("#SUnit").val("");$("#SRate").val("");$("#SGST").val("")}function UpdateDiscount(n){grandtotal=ClearCulture(grandtotal);n=="P"?(per=parseFloat($("#DiscountPercent").val()),disamount=Math.round(grandtotal*per/100).toFixed(2),saleamount=grandtotal-disamount,$("#DiscountPercent").val(per),$("#DiscountValue").val(ConvertToIndian(disamount)),$("#Discount").val(ConvertToIndian(disamount)),$("#GroundTotal").text(ConvertToIndian(saleamount))):(disamount=ClearCulture($("#DiscountValue").val()),disamount=parseFloat(disamount),per=Math.round(disamount/grandtotal*100).toFixed(2),saleamount=grandtotal-disamount,$("#DiscountPercent").val(per),$("#DiscountValue").val(ConvertToIndian(disamount)),$("#Discount").val(ConvertToIndian(disamount)),$("#GroundTotal").text(ConvertToIndian(saleamount)))}function FetchEditRowProductOrService(n){$.ajax({type:"POST",url:"/Share/FetchEditProductOrService",dataType:"json",data:{iID:n},success:function(n){var r=n,t=r.split("^"),i=t[6];i=="P"&&($("#iconp").removeClass("fas fa-plus").addClass("fas fa-recycle"),$("#btnp").val("EP"),$("#ProductID").val(t[0]),$("#ProductName").val(t[1]),$("#PQty").val(t[2]),$("#PUnit").val(t[3]),$("#PRate").val(t[4]),$("#PGST").val(t[5]),$("#tab1").click());i=="S"&&($("#icons").removeClass("fas fa-plus").addClass("fas fa-recycle"),$("#btns").val("ES"),$("#ServiceID").val(t[0]),$("#ServiceName").val(t[1]),$("#SQty").val(t[2]),$("#SUnit").val(t[3]),$("#SRate").val(t[4]),$("#SGST").val(t[5]),$("#tab2").click());i=="C"&&($("#iconc").removeClass("fas fa-plus").addClass("fas fa-recycle"),$("#btnc").val("EC"),$("#ChargesID").val(t[0]),$("#ChargesName").val(t[1]),$("#CCharge").val(t[4]),$("#tab3").click())}})}function GetVenderList(n){$(document).ready(function(){$("#"+n).autocomplete({source:function(n,t){$.ajax({url:"/Share/VenderAutoComplete",type:"POST",dataType:"json",data:{Prefix:n.term},success:function(n){t($.map(n,function(n){return{label:n.venderName,value:n.venderName,id:n.venderID}}))}})},select:function(n,t){$("#VenderHiddenID").val(t.item.id);FetchVender(t.item.id)}})})}function FetchVender(n){$.ajax({type:"POST",url:"/Share/FetchVender",dataType:"json",data:{VenderID:n},success:function(n){$("#VenderHiddenID").val(n.venderID);$("#VenderName").val(n.venderName);$("#Address").val(n.address);$("#State").val(n.state);$("#City").val(n.city);$("#Mobile").val(n.mobile);$("#Whatsup").val(n.whatsup);$("#Email").val(n.email);$("#GSTNo").val(n.gsto);$("#VenderID").val(n.venderName)}})}function VenderManage(){var n=$("#VenderHiddenID").val();n=="0"?($("#VenderModel").modal("show"),$("#vcreate").show(),$("#vupdate").hide(),$("#vclear").hide()):($("#VenderModel").modal("show"),$("#vcreate").hide(),$("#vupdate").show(),$("#vclear").show())}function InsertVender(){var t=$("#vl-vender-form").valid(),n;t==!0&&(n={},n.VenderName=$("#VenderName").val(),n.Address=$("#Address").val(),n.State=$("#State").val(),n.City=$("#City").val(),n.Mobile=$("#Mobile").val(),n.Whatsup=$("#Whatsup").val(),n.Email=$("#Email").val(),n.GSTNo=$("#GSTNo").val(),$.ajax({type:"POST",url:"/Share/InsertVender",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n=="DO"?alert("Duplicate Record Found !"):($("#VenderHiddenID").val(n),$("#VenderID").val($("#VenderName").val()),alert("Vender added successfully !"),$("#VenderModel").modal("hide"))}}))}function UpdateVender(){var t=$("#vl-vender-form").valid(),n;t==!0&&(n={},n.VenderID=$("#VenderID").val(),n.VenderName=$("#VenderName").val(),n.Address=$("#Address").val(),n.State=$("#State").val(),n.City=$("#City").val(),n.Mobile=$("#Mobile").val(),n.Whatsup=$("#Whatsup").val(),n.Email=$("#Email").val(),n.GSTNo=$("#GSTNo").val(),$.ajax({type:"POST",url:"/Share/UpdateVender",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n=="DO"?alert("Duplicate Record Found !"):($("#VenderHiddenID").val(n),$("#VenderID").val($("#VenderName").val()),alert("Vender update successfully !"),$("#VenderModel").modal("hide"))}}))}function ClearVender(){$("#VenderID").val("");$("#VenderHiddenID").val("0");$("#VenderName").val("");$("#Address").val("");$("#State").val("");$("#City").val("");$("#Mobile").val("");$("#Whatsup").val("");$("#Email").val("");$("#GSTNo").val("");$("#vcreate").show();$("#vupdate").hide();$("#vclear").hide()}function GetCustomerList(n){$(document).ready(function(){$("#"+n).autocomplete({source:function(n,t){$.ajax({url:"/Share/CustomerAutoComplete",type:"POST",dataType:"json",data:{Prefix:n.term},success:function(n){t($.map(n,function(n){return{label:n.customerName,value:n.customerName,id:n.customerID}}))}})},select:function(n,t){FetchCustomer(t.item.id);$("#CustomerHiddenID").val(t.item.id)}})})}function FetchCustomer(n){$.ajax({type:"POST",url:"/Share/FetchCustomer",dataType:"json",data:{CustomerID:n},success:function(n){$("#CustomerHiddenID").val(n.customerID);$("#CustomerID").val(n.customerName);$("#Address").val(n.address);$("#City").val(n.city);$("#State").val(n.state);$("#Email").val(n.email);$("#GSTNo").val(n.gstNo);$("#Mobile").val(n.mobile);$("#Whatsup").val(n.whatsup);$("#SAddress").val(n.sAddress);$("#SCity").val(n.sCity);$("#SState").val(n.sState);$("#SMobile").val(n.sMobile);$("#SWhatsup").val(n.sWhatsup);$("#SEmail").val(n.sEmail);$("#SGSTNo").val(n.sGSTNo)}})}function CustomerManage(){var n=$("#CustomerHiddenID").val();n=="0"?($("#CustomerModel").modal("show"),$("#ccreate").show(),$("#cupdate").hide(),$("#cclear").hide()):($("#CustomerModel").modal("show"),$("#ccreate").hide(),$("#cupdate").show(),$("#cclear").show())}function InsertCustomer(){var t=$("#vl-customer-form").valid(),n;t==!0&&(n={},n.CustomerName=$("#CustomerName").val(),n.CustomerType=$('input[name="CustomerType"]:checked').val(),n.BillToAddress=$("#BillToAddress").val(),n.BillToCity=$("#BillToCity").val(),n.BillToState=$("#BillToState").val(),n.BillToEmail=$("#BillToEmail").val(),n.BillToGSTNo=$("#BillToGSTNo").val(),n.BillToMobile=$("#BillToMobile").val(),n.BillToWhatsup=$("#BillToWhatsup").val(),n.ShipToName=$("#ShipToName").val(),n.ShipToAddress=$("#ShipToAddress").val(),n.ShipToCity=$("#ShipToCity").val(),n.ShipToState=$("#ShipToState").val(),n.ShipToMobile=$("#ShipToMobile").val(),n.ShipToWhatsup=$("#ShipToWhatsup").val(),n.ShipToEmail=$("#ShipToEmail").val(),n.ShipToGSTNo=$("#ShipToGSTNo").val(),n.Birthday=$("#Birthday").val(),n.Anniversary=$("#Anniversary").val(),n.ProfessionID=$("#ProfessionID").val(),$.ajax({type:"POST",url:"/Share/InsertCustomer",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n=="DO"?alert("Duplicate Record Found !"):($("#CustomerHiddenID").val(n),$("#CustomerID").val($("#CustomerName").val()),alert("Customer added successfully !"),$("#CustomerModel").modal("hide"))}}))}function UpdateCustomer(){var t=$("#vl-customer-form").valid(),n;t==!0&&(n={},n.CustomerID=$("#CustomerHiddenID").val(),n.CustomerName=$("#CustomerName").val(),n.CustomerType=$('input[name="CustomerType"]:checked').val(),n.BillToAddress=$("#BillToAddress").val(),n.BillToCity=$("#BillToCity").val(),n.BillToState=$("#BillToState").val(),n.BillToEmail=$("#BillToEmail").val(),n.BillToGSTNo=$("#BillToGSTNo").val(),n.BillToMobile=$("#BillToMobile").val(),n.BillToWhatsup=$("#BillToWhatsup").val(),n.ShipToName=$("#ShipToName").val(),n.ShipToAddress=$("#ShipToAddress").val(),n.ShipToCity=$("#ShipToCity").val(),n.ShipToState=$("#ShipToState").val(),n.ShipToMobile=$("#ShipToMobile").val(),n.ShipToEmail=$("#ShipToEmail").val(),n.ShipToGSTNo=$("#ShipToGSTNo").val(),n.Birthday=$("#Birthday").val(),n.Anniversary=$("#Anniversary").val(),n.ProfessionID=$("#ProfessionID").val(),$.ajax({type:"POST",url:"/Share/UpdateCustomer",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n=="DO"?alert("Duplicate Record Found !"):($("#CustomerHiddenID").val(n),$("#CustomerID").val($("#CustomerName").val()),alert("Customer update successfully !"),$("#CustomerModel").modal("hide"))}}))}function ClearCustomer(){$("#CustomerID").val("");$("#CustomerHiddenID").val("0");$("#SameAs").prop("checked",!1);$("#SameAs2").prop("checked",!1);$("#CustomerName").val("A");$("#CustomerType").val("");$("#BillToAddress").val("");$("#BillToCity").val("");$("#BillToState").val("");$("#BillToEmail").val("");$("#BillToGSTNo").val("");$("#BillToMobile").val("");$("#BillToWhatsup").val("");$("#ShipToName").val("");$("#ShipToAddress").val("");$("#ShipToCity").val("");$("#ShipToState").val("");$("#ShipToMobile").val("");$("#ShipToEmail").val("");$("#ShipToGSTNo").val("");$("#Birthday").val("");$("#Anniversary").val("");$("#ProfessionID").val("0");$("#ccreate").show();$("#cupdate").hide();$("#cclear").hide()}function GetDropDown(n,t,i){var r=$("#"+n);r.empty().append('<option selected="selected" value="-1" disabled = "disabled">Loading.....<\/option>');$.ajax({type:"POST",url:t,data:"{}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){r.empty().append('<option selected="selected" value="-1">Select<\/option>');$.each(n,function(){r.append($("<option><\/option>").val(this.value).html(this.text))});r.append('<option value="0">Add New '+i+" +<\/option>")}})}function SetDropDown(n,t,i){var r=$("#"+n),u;r.empty().append('<option selected="selected" value="-1" disabled = "disabled">Loading.....<\/option>');u="";$.ajax({type:"POST",url:t,data:"{}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){r.empty().append('<option selected="selected" value="-1">Select<\/option>');$.each(t,function(){r.append($("<option><\/option>").val(this.value).html(this.text))});r.append('<option value="0">Add New '+n+" +<\/option>");$("#"+n).val(i)}})}function DropDownActivity(n,t,i){$("#"+n).change(function(){var n=this.value;n=="0"?$("#"+t).modal("show"):$("#"+i).val(n)})}function getCustomerType(){var n=$('input[name="CustomerType"]:checked').val();n=="A"&&($("#PartC").hide(),$("#PartA").show(),$("#PartB").show());n=="B"&&($("#PartB").hide(),$("#PartC").hide(),$("#PartA").show());n=="C"&&($("#PartB").hide(),$("#PartA").show(),$("#PartC").show())}function productform(){return $("#ProductID").val()==""?($("#ProductName").addClass("validation"),!1):($("#ProductName").removeClass("validation"),$("#ProductName").val()=="")?($("#ProductName").addClass("validation"),!1):($("#ProductName").removeClass("validation"),$("#PQty").val()=="")?($("#PQty").addClass("validation"),!1):($("#PQty").removeClass("validation"),$("#PRate").val()=="")?($("#PRate").addClass("validation"),!1):($("#PRate").removeClass("validation"),!0)}function serviceform(){return $("#ServiceID").val()==""?($("#ServiceName").addClass("validation"),!1):($("#ServiceName").removeClass("validation"),$("#ServiceName").val()=="")?($("#ServiceName").addClass("validation"),!1):($("#ServiceName").removeClass("validation"),$("#SQty").val()=="")?($("#SQty").addClass("validation"),!1):($("#SQty").removeClass("validation"),$("#SRate").val()=="")?($("#SRate").addClass("validation"),!1):($("#SRate").removeClass("validation"),!0)}function chargesform(){return $("#ChargesID").val()==""?($("#ChargesName").addClass("validation"),!1):($("#ChargesName").removeClass("validation"),$("#ChargesName").val()=="")?($("#ChargesName").addClass("validation"),!1):($("#ChargesName").removeClass("validation"),$("#CCharge").val()=="")?($("#CCharge").addClass("validation"),!1):($("#CCharge").removeClass("validation"),!0)}